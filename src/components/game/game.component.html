<div #canvasContainer class="relative w-full h-full bg-sky-300 rounded-2xl shadow-2xl overflow-hidden border-4 border-white">
  <canvas #zdogCanvas class="block w-full h-full"></canvas>

  <!-- Score Basket -->
  <div class="absolute bottom-5 left-1/2 -translate-x-1/2 flex flex-col items-center z-10">
    <div class="relative w-32 h-24">
      <!-- Basket SVG -->
      <svg viewBox="0 0 100 80" class="w-full h-full drop-shadow-lg">
        <path d="M 10,25 C 10,10 90,10 90,25 L 80,75 C 80,85 20,85 20,75 Z" fill="#d2b48c" stroke="#8c5a2b" stroke-width="3"/>
        <path d="M 10,25 C 20,40 80,40 90,25" fill="none" stroke="#8c5a2b" stroke-width="3"/>
      </svg>
      
      <!-- Oranges based on score -->
      @if (score() > 0 && score() < 10) {
        <!-- Few Oranges State -->
        <div class="absolute inset-0 p-4 flex items-end justify-center">
            <div class="relative w-full h-1/2">
                <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <div class="absolute bottom-0 left-[25%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <div class="absolute bottom-0 right-[25%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
            </div>
        </div>
      } @else if (score() >= 10) {
        <!-- Full Oranges State -->
        <div class="absolute inset-0 p-4 flex items-end justify-center">
            <div class="relative w-full h-full">
                <!-- Bottom layer -->
                <div class="absolute bottom-0 left-[15%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <div class="absolute bottom-0 right-[15%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <!-- Middle layer -->
                <div class="absolute bottom-5 left-[30%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <div class="absolute bottom-5 right-[30%] w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
                <!-- Top layer -->
                <div class="absolute bottom-10 left-1/2 -translate-x-1/2 w-7 h-7 bg-orange-500 rounded-full border-2 border-orange-700"></div>
            </div>
        </div>
      }
      
      <!-- Score Text -->
      <span class="absolute -top-2 -right-2 bg-white rounded-full w-10 h-10 flex items-center justify-center text-xl font-bold text-amber-800 shadow-lg border-2 border-amber-300">{{ score() }}</span>
    </div>
  </div>

  @if (isPaused() && !currentQuestion()) {
    <div class="absolute inset-0 bg-black/40 flex items-center justify-center z-20">
        <h1 class="text-6xl font-bold text-white animate-pulse">{{ translationService.t('paused')() }}</h1>
    </div>
  }
</div>

@if (currentQuestion(); as question) {
  <app-question-modal 
    [question]="question"
    [title]="translationService.t('questionTime')()"
    (answeredCorrectly)="onQuestionAnswered()" />
}
